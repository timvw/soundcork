# Web UI Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Add a web UI to soundcork that replicates the ueberboese Flutter app's functionality, allowing users to control Bose SoundTouch speakers from a browser.

**Architecture:** Single-page app (vanilla JS + CSS) mounted into the existing soundcork FastAPI app at `/webui/`. A server-side proxy relays browser requests to speakers on the LAN (avoids CORS). WebSocket proxying provides real-time updates. State (selected speaker, config) persists in localStorage.

**Tech Stack:** Python 3.12, FastAPI, httpx (async HTTP proxy), vanilla JS (ES modules), vanilla CSS, WebSocket (native browser API)

---

## Tasks

| Task | Component | What it delivers |
|------|-----------|-----------------|
| 1 | Backend skeleton + static serving | `/webui/` serves index.html |
| 2 | Speaker proxy API | Browser can talk to speakers via `/webui/api/speaker/{ip}/...` |
| 3 | Frontend SPA shell | Hash router, navigation, layout |
| 4 | Speaker List page | Add/remove speakers, auto-discover from account |
| 5 | Speaker Detail page | Now playing, volume, presets grid, play controls |
| 6 | WebSocket proxy + real-time updates | Live volume/now-playing/zone updates |
| 7 | Presets management | View/edit/delete presets (Spotify, TuneIn, Internet Radio) |
| 8 | Recents page | Recent playback history with replay |
| 9 | Remote Control page | Full key-based remote |
| 10 | Zones (multi-room) | Create/manage speaker groups |
| 11 | Spotify accounts + Device events + Config | Remaining pages |

## File Structure

```
soundcork/
├── soundcork/
│   ├── main.py                  # MODIFIED: mount webui router + static files
│   ├── webui/
│   │   ├── __init__.py
│   │   ├── routes.py            # FastAPI router: static serving, speaker proxy, WS proxy, TuneIn proxy
│   │   └── static/
│   │       ├── index.html       # SPA shell
│   │       ├── style.css        # All styles (responsive, dark mode)
│   │       └── app.js           # All JS (router, state, API client, all page renderers)
├── requirements.txt             # MODIFIED: add websockets
```

## Dependencies to Add

| Package | Purpose |
|---------|---------|
| `websockets` | WebSocket proxy (speaker port 8080 relay) |
